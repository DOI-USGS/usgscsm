version: '0.1.{build}'

image: Visual Studio 2017

platform:
  - x64

configuration:
  - Release
  - Debug

install:
  - git submodule update --init --recursive
  # This pulls csm from conda
  - cmd: call C:\\Miniconda36-x64\Scripts\activate.bat
  - cmd: conda install -y -c usgs-astrogeology libcsm

before_build:
  - cmake -G "Visual Studio 15 2017 Win64" .

build:
  project: $(APPVEYOR_BUILD_FOLDER)\$(APPVEYOR_PROJECT_NAME).sln